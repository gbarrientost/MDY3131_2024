-- guia 2 caso 1
SET SERVEROUTPUT ON;

VAR B_ANNIO NUMBER

EXEC :B_ANNIO:=TO_CHAR(SYSDATE,'YYYY')



VAR B_COM1 VARCHAR2

EXEC :B_COM1:='María Pinto'

VAR B_VAL_COM1 NUMBER

EXEC :B_VAL_COM1:=20000



VAR B_COM2 VARCHAR2

EXEC :B_COM2:='Curacaví'

VAR B_VAL_COM2 NUMBER

EXEC :B_VAL_COM2:=25000



VAR B_COM3 VARCHAR2

EXEC :B_COM3:='Talagante'

VAR B_VAL_COM3 NUMBER

EXEC :B_VAL_COM3:=30000



VAR B_COM4 VARCHAR2

EXEC :B_COM4:='El Monte'

VAR B_VAL_COM4 NUMBER

EXEC :B_VAL_COM4:=35000



VAR B_COM5 VARCHAR2

EXEC :B_COM5:='Buin'

VAR B_VAL_COM5 NUMBER

EXEC :B_VAL_COM5:=40000



VAR B_RUT NUMBER

EXEC :B_RUT:=11846972



DECLARE





V_NUMRUN_EMP PROY_MOVILIZACION.NUMRUN_EMP%TYPE;

V_DVRUN_EMP PROY_MOVILIZACION.DVRUN_EMP%TYPE;

V_NOMBRE_EMPLEADO PROY_MOVILIZACION.NOMBRE_EMPLEADO%TYPE;

V_SUELDO_BASE PROY_MOVILIZACION.SUELDO_BASE%TYPE;

V_PORC_MOVIL_NORMAL PROY_MOVILIZACION.PORC_MOVIL_NORMAL%TYPE;

V_VALOR_MOVIL_NORMAL PROY_MOVILIZACION.VALOR_MOVIL_NORMAL%TYPE;

V_VALOR_MOVIL_EXTRA PROY_MOVILIZACION.VALOR_MOVIL_EXTRA%TYPE;

V_VALOR_TOTAL_MOVIL PROY_MOVILIZACION.VALOR_TOTAL_MOVIL%TYPE;

V_COMUNA COMUNA.NOMBRE_COMUNA%TYPE;

BEGIN



SELECT NUMRUN_EMP,DVRUN_EMP,PNOMBRE_EMP||' '||SNOMBRE_EMP||' '||

APPATERNO_EMP||' '||APMATERNO_EMP,SUELDO_BASE,C.NOMBRE_COMUNA

INTO V_NUMRUN_EMP,V_DVRUN_EMP,V_NOMBRE_EMPLEADO,V_SUELDO_BASE,V_COMUNA

FROM EMPLEADO E

INNER JOIN COMUNA C ON E.ID_COMUNA=C.ID_COMUNA

WHERE NUMRUN_EMP=:B_RUT;



V_PORC_MOVIL_NORMAL:=TRUNC(V_SUELDO_BASE/100000);

V_VALOR_MOVIL_NORMAL:=ROUND(V_SUELDO_BASE*(V_PORC_MOVIL_NORMAL/100));



IF(V_COMUNA=:B_COM1)THEN

V_VALOR_MOVIL_EXTRA:= :B_VAL_COM1;

...

...

...



ELSE



END IF;